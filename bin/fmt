#! /usr/bin/env bash

# DOC: Autoformat Java and TypeScript source files. Usually good to run before committing.

source bin/lib.sh
docker::set_project_name_dev

bin/pull-image --formatter

echo "mapping $(pwd) to container"

# Can't use TTY in CI
if [[ -n "${CI}" ]]; then
  # .git needed for github actions to diff
  docker run --rm \
    -v "$(pwd):/code" \
    civiform/formatter
  exit 0
fi

docker run --rm -it \
  -v "$(pwd):/code" \
  civiform/formatter
